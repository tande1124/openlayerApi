{"version":3,"sources":["webpack:///./disable-image-smoothing.js"],"names":["key","attributions","disabledLayer","className","source","url","maxZoom","crossOrigin","imageSmoothing","imagery","enabledLayer","on","evt","getOpacity","context","fillStyle","fillRect","canvas","width","height","const","control","document","getElementById","output","addEventListener","innerText","value","setOpacity","view","center","zoom","projection","map1","target","layers","map2","info1","info2","showElevations","dragging","forEachLayerAtPixel","pixel","layer","toFixed","layerFilter"],"mappings":"2FAAA,wCAKMA,EAAM,oCACNC,EACJ,4LAGIC,EAAgB,IAAI,IAAU,CAElCC,UAAW,eACXC,OAAQ,IAAI,IAAI,CACdH,aAAcA,EACdI,IACE,kEAAoEL,EACtEM,QAAS,GACTC,YAAa,GACbC,gBAAgB,MAIdC,EAAU,IAAI,IAAU,CAC5BN,UAAW,mBACXC,OAAQ,IAAI,IAAI,CACdH,aAAcA,EACdI,IAAK,gEAAkEL,EACvEM,QAAS,GACTC,YAAa,OAIXG,EAAe,IAAI,IAAU,CACjCN,OAAQ,IAAI,IAAI,CACdH,aAAcA,EACdI,IACE,kEAAoEL,EACtEM,QAAS,GACTC,YAAa,OAIjBE,EAAQE,GAAG,aAAa,SAAUC,GAEH,IAAzBH,EAAQI,eACVD,EAAIE,QAAQC,UAAY,QACxBH,EAAIE,QAAQE,SACV,EACA,EACAJ,EAAIE,QAAQG,OAAOC,MACnBN,EAAIE,QAAQG,OAAOE,YAKzBC,IAAMC,EAAUC,SAASC,eAAe,WAClCC,EAASF,SAASC,eAAe,UACvCF,EAAQI,iBAAiB,SAAS,WAChCD,EAAOE,UAAYL,EAAQM,MAC3BlB,EAAQmB,WAAWP,EAAQM,MAAQ,QAErCH,EAAOE,UAAYL,EAAQM,MAC3BlB,EAAQmB,WAAWP,EAAQM,MAAQ,KAEnCP,IAAMS,EAAO,IAAI,IAAK,CACpBC,OAAQ,CAAC,MAAO,SAChBC,KAAM,GACNC,WAAY,cAGRC,EAAO,IAAI,IAAI,CACnBC,OAAQ,OACRC,OAAQ,CAACjC,EAAeO,GACxBoB,KAAMA,IAGFO,EAAO,IAAI,IAAI,CACnBF,OAAQ,OACRC,OAAQ,CAACzB,GACTmB,KAAMA,IAGFQ,EAAQf,SAASC,eAAe,SAChCe,EAAQhB,SAASC,eAAe,SAEhCgB,EAAiB,SAAU3B,GAC3BA,EAAI4B,WAGRP,EAAKQ,oBACH7B,EAAI8B,OACJ,SAAUC,EAAOD,GACftB,IAAMD,EAC0D,IAAzC,IAAXuB,EAAM,GAAW,IAAiB,IAAXA,EAAM,GAAWA,EAAM,IAAvD,IACHL,EAAMX,UAAYP,EAAOyB,QAAQ,KAEnC,CACEC,YAAa,SAAUF,GACrB,OAAOA,IAAUzC,KAIvBkC,EAAKK,oBACH7B,EAAI8B,OACJ,SAAUC,EAAOD,GACftB,IAAMD,EAC0D,IAAzC,IAAXuB,EAAM,GAAW,IAAiB,IAAXA,EAAM,GAAWA,EAAM,IAAvD,IACHJ,EAAMZ,UAAYP,EAAOyB,QAAQ,KAEnC,CACEC,YAAa,SAAUF,GACrB,OAAOA,IAAUjC,OAMzBuB,EAAKtB,GAAG,cAAe4B,GACvBH,EAAKzB,GAAG,cAAe4B,K","file":"disable-image-smoothing.js","sourcesContent":["import Map from '../src/ol/Map.js';\r\nimport TileLayer from '../src/ol/layer/Tile.js';\r\nimport View from '../src/ol/View.js';\r\nimport XYZ from '../src/ol/source/XYZ.js';\r\n\r\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\r\nconst attributions =\r\n  '<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> ' +\r\n  '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>';\r\n\r\nconst disabledLayer = new TileLayer({\r\n  // specify className so forEachLayerAtPixel can distinguish layers\r\n  className: 'ol-layer-dem',\r\n  source: new XYZ({\r\n    attributions: attributions,\r\n    url:\r\n      'https://api.maptiler.com/tiles/terrain-rgb/{z}/{x}/{y}.png?key=' + key,\r\n    maxZoom: 10,\r\n    crossOrigin: '',\r\n    imageSmoothing: false,\r\n  }),\r\n});\r\n\r\nconst imagery = new TileLayer({\r\n  className: 'ol-layer-imagery',\r\n  source: new XYZ({\r\n    attributions: attributions,\r\n    url: 'https://api.maptiler.com/tiles/satellite/{z}/{x}/{y}.jpg?key=' + key,\r\n    maxZoom: 20,\r\n    crossOrigin: '',\r\n  }),\r\n});\r\n\r\nconst enabledLayer = new TileLayer({\r\n  source: new XYZ({\r\n    attributions: attributions,\r\n    url:\r\n      'https://api.maptiler.com/tiles/terrain-rgb/{z}/{x}/{y}.png?key=' + key,\r\n    maxZoom: 10,\r\n    crossOrigin: '',\r\n  }),\r\n});\r\n\r\nimagery.on('prerender', function (evt) {\r\n  // use opaque background to conceal DEM while fully opaque imagery renders\r\n  if (imagery.getOpacity() === 1) {\r\n    evt.context.fillStyle = 'white';\r\n    evt.context.fillRect(\r\n      0,\r\n      0,\r\n      evt.context.canvas.width,\r\n      evt.context.canvas.height\r\n    );\r\n  }\r\n});\r\n\r\nconst control = document.getElementById('opacity');\r\nconst output = document.getElementById('output');\r\ncontrol.addEventListener('input', function () {\r\n  output.innerText = control.value;\r\n  imagery.setOpacity(control.value / 100);\r\n});\r\noutput.innerText = control.value;\r\nimagery.setOpacity(control.value / 100);\r\n\r\nconst view = new View({\r\n  center: [6.893, 45.8295],\r\n  zoom: 16,\r\n  projection: 'EPSG:4326',\r\n});\r\n\r\nconst map1 = new Map({\r\n  target: 'map1',\r\n  layers: [disabledLayer, imagery],\r\n  view: view,\r\n});\r\n\r\nconst map2 = new Map({\r\n  target: 'map2',\r\n  layers: [enabledLayer],\r\n  view: view,\r\n});\r\n\r\nconst info1 = document.getElementById('info1');\r\nconst info2 = document.getElementById('info2');\r\n\r\nconst showElevations = function (evt) {\r\n  if (evt.dragging) {\r\n    return;\r\n  }\r\n  map1.forEachLayerAtPixel(\r\n    evt.pixel,\r\n    function (layer, pixel) {\r\n      const height =\r\n        -10000 + (pixel[0] * 256 * 256 + pixel[1] * 256 + pixel[2]) * 0.1;\r\n      info1.innerText = height.toFixed(1);\r\n    },\r\n    {\r\n      layerFilter: function (layer) {\r\n        return layer === disabledLayer;\r\n      },\r\n    }\r\n  );\r\n  map2.forEachLayerAtPixel(\r\n    evt.pixel,\r\n    function (layer, pixel) {\r\n      const height =\r\n        -10000 + (pixel[0] * 256 * 256 + pixel[1] * 256 + pixel[2]) * 0.1;\r\n      info2.innerText = height.toFixed(1);\r\n    },\r\n    {\r\n      layerFilter: function (layer) {\r\n        return layer === enabledLayer;\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nmap1.on('pointermove', showElevations);\r\nmap2.on('pointermove', showElevations);\r\n"],"sourceRoot":""}