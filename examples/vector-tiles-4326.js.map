{"version":3,"sources":["webpack:///./vector-tiles-4326.js"],"names":["length","let","i","Math","pow","then","map","const","tileGrid","extent","tileSize","resolutions","mapboxStyle","get","getLayers","forEach","layer","mapboxSource","sources","type","source","getSource","setSource","format","projection","urls","getUrls","setView","zoom","center"],"mappings":"4FAAA,4DAYA,IAAmBA,OAAS,GAC5B,IAAKC,IAAIC,EAAI,EAAGA,EAAI,KAAMA,EACxB,IAAmBA,GAHC,QAGoBC,KAAKC,IAAI,EAAGF,EAAI,GAG1D,YACE,MACA,6FACAG,MAAK,SAAUC,GAEfC,IAAMC,EAAW,IAAI,IAAS,CAC5BC,OAAQ,EAAE,KAAM,GAAI,IAAK,IACzBC,SAAU,IACVC,YAAa,MAGTC,EAAcN,EAAIO,IAAI,gBAG5BP,EAAIQ,YAAYC,SAAQ,SAAUC,GAChCT,IAAMU,EAAeD,EAAMH,IAAI,iBAC/B,GAAII,GAA2D,WAA3CL,EAAYM,QAAQD,GAAcE,KAAmB,CACvEZ,IAAMa,EAASJ,EAAMK,YACrBL,EAAMM,UACJ,IAAI,IAAiB,CACnBC,OAAQ,IAAI,IACZC,WAAY,YACZC,KAAML,EAAOM,UACblB,SAAUA,SAOlBF,EAAIqB,QACF,IAAI,IAAK,CACPH,WAAY,YACZI,KAAMhB,EAAYgB,KAClBC,OAAQjB,EAAYiB,e","file":"vector-tiles-4326.js","sourcesContent":["import MVT from '../src/ol/format/MVT.js';\r\nimport TileGrid from '../src/ol/tilegrid/TileGrid.js';\r\nimport VectorTileSource from '../src/ol/source/VectorTile.js';\r\nimport View from '../src/ol/View.js';\r\n\r\nimport olms from 'ol-mapbox-style';\r\nimport {defaultResolutions} from 'ol-mapbox-style/dist/util.js';\r\n\r\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\r\n\r\n// Match the server resolutions\r\nconst maxResolution = 360 / 512;\r\ndefaultResolutions.length = 14;\r\nfor (let i = 0; i < 14; ++i) {\r\n  defaultResolutions[i] = maxResolution / Math.pow(2, i + 1);\r\n}\r\n\r\nolms(\r\n  'map',\r\n  'https://api.maptiler.com/maps/basic-4326/style.json?key=' + key\r\n).then(function (map) {\r\n  // Custom tile grid for the EPSG:4326 projection\r\n  const tileGrid = new TileGrid({\r\n    extent: [-180, -90, 180, 90],\r\n    tileSize: 512,\r\n    resolutions: defaultResolutions,\r\n  });\r\n\r\n  const mapboxStyle = map.get('mapbox-style');\r\n\r\n  // Replace the source with a EPSG:4326 projection source for each vector tile layer\r\n  map.getLayers().forEach(function (layer) {\r\n    const mapboxSource = layer.get('mapbox-source');\r\n    if (mapboxSource && mapboxStyle.sources[mapboxSource].type === 'vector') {\r\n      const source = layer.getSource();\r\n      layer.setSource(\r\n        new VectorTileSource({\r\n          format: new MVT(),\r\n          projection: 'EPSG:4326',\r\n          urls: source.getUrls(),\r\n          tileGrid: tileGrid,\r\n        })\r\n      );\r\n    }\r\n  });\r\n\r\n  // Configure the map with a view with EPSG:4326 projection\r\n  map.setView(\r\n    new View({\r\n      projection: 'EPSG:4326',\r\n      zoom: mapboxStyle.zoom,\r\n      center: mapboxStyle.center,\r\n    })\r\n  );\r\n});\r\n"],"sourceRoot":""}