{"version":3,"sources":["webpack:///./dynamic-data.js"],"names":["tileLayer","source","map","layers","target","view","center","zoom","imageStyle","image","radius","fill","color","stroke","width","headInnerImageStyle","headOuterImageStyle","R","r","p","on","event","const","i","vectorContext","frameState","theta","Math","PI","time","coordinates","t","x","cos","y","sin","push","setStyle","drawGeometry","headPoint","length","render"],"mappings":"2FAAA,+FAQMA,EAAY,IAAI,IAAU,CAC9BC,OAAQ,IAAI,MAGRC,EAAM,IAAI,IAAI,CAClBC,OAAQ,CAACH,GACTI,OAAQ,MACRC,KAAM,IAAI,IAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIJC,EAAa,IAAI,IAAM,CAC3BC,MAAO,IAAI,IAAY,CACrBC,OAAQ,EACRC,KAAM,IAAI,IAAK,CAACC,MAAO,WACvBC,OAAQ,IAAI,IAAO,CAACD,MAAO,MAAOE,MAAO,QAIvCC,EAAsB,IAAI,IAAM,CACpCN,MAAO,IAAI,IAAY,CACrBC,OAAQ,EACRC,KAAM,IAAI,IAAK,CAACC,MAAO,aAIrBI,EAAsB,IAAI,IAAM,CACpCP,MAAO,IAAI,IAAY,CACrBC,OAAQ,EACRC,KAAM,IAAI,IAAK,CAACC,MAAO,cAMrBK,EAAI,IACJC,EAAI,IACJC,EAAI,IACVnB,EAAUoB,GAAG,cAAc,SAAUC,GACnCC,IAIIC,EAJEC,EAAgB,YAAiBH,GACjCI,EAAaJ,EAAMI,WACnBC,EAAS,EAAIC,KAAKC,GAAKH,EAAWI,KAPvB,IAQXC,EAAc,GAEpB,IAAKP,EAAI,EAAGA,EAXJ,MAWaA,EAAG,CACtBD,IAAMS,EAAIL,EAAS,EAAIC,KAAKC,GAAKL,EAZ3B,IAaAS,GAAKf,EAAIC,GAAKS,KAAKM,IAAIF,GAAKZ,EAAIQ,KAAKM,KAAMhB,EAAIC,GAAKa,EAAKb,GACzDgB,GAAKjB,EAAIC,GAAKS,KAAKQ,IAAIJ,GAAKZ,EAAIQ,KAAKQ,KAAMlB,EAAIC,GAAKa,EAAKb,GAC/DY,EAAYM,KAAK,CAACJ,EAAGE,IAEvBV,EAAca,SAAS7B,GACvBgB,EAAcc,aAAa,IAAI,IAAWR,IAE1CR,IAAMiB,EAAY,IAAI,IAAMT,EAAYA,EAAYU,OAAS,IAE7DhB,EAAca,SAASrB,GACvBQ,EAAcc,aAAaC,GAE3Bf,EAAca,SAAStB,GACvBS,EAAcc,aAAaC,GAE3BrC,EAAIuC,YAENvC,EAAIuC,W","file":"dynamic-data.js","sourcesContent":["import Map from '../src/ol/Map.js';\r\nimport OSM from '../src/ol/source/OSM.js';\r\nimport TileLayer from '../src/ol/layer/Tile.js';\r\nimport View from '../src/ol/View.js';\r\nimport {Circle as CircleStyle, Fill, Stroke, Style} from '../src/ol/style.js';\r\nimport {MultiPoint, Point} from '../src/ol/geom.js';\r\nimport {getVectorContext} from '../src/ol/render.js';\r\n\r\nconst tileLayer = new TileLayer({\r\n  source: new OSM(),\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [tileLayer],\r\n  target: 'map',\r\n  view: new View({\r\n    center: [0, 0],\r\n    zoom: 2,\r\n  }),\r\n});\r\n\r\nconst imageStyle = new Style({\r\n  image: new CircleStyle({\r\n    radius: 5,\r\n    fill: new Fill({color: 'yellow'}),\r\n    stroke: new Stroke({color: 'red', width: 1}),\r\n  }),\r\n});\r\n\r\nconst headInnerImageStyle = new Style({\r\n  image: new CircleStyle({\r\n    radius: 2,\r\n    fill: new Fill({color: 'blue'}),\r\n  }),\r\n});\r\n\r\nconst headOuterImageStyle = new Style({\r\n  image: new CircleStyle({\r\n    radius: 5,\r\n    fill: new Fill({color: 'black'}),\r\n  }),\r\n});\r\n\r\nconst n = 200;\r\nconst omegaTheta = 30000; // Rotation period in ms\r\nconst R = 7e6;\r\nconst r = 2e6;\r\nconst p = 2e6;\r\ntileLayer.on('postrender', function (event) {\r\n  const vectorContext = getVectorContext(event);\r\n  const frameState = event.frameState;\r\n  const theta = (2 * Math.PI * frameState.time) / omegaTheta;\r\n  const coordinates = [];\r\n  let i;\r\n  for (i = 0; i < n; ++i) {\r\n    const t = theta + (2 * Math.PI * i) / n;\r\n    const x = (R + r) * Math.cos(t) + p * Math.cos(((R + r) * t) / r);\r\n    const y = (R + r) * Math.sin(t) + p * Math.sin(((R + r) * t) / r);\r\n    coordinates.push([x, y]);\r\n  }\r\n  vectorContext.setStyle(imageStyle);\r\n  vectorContext.drawGeometry(new MultiPoint(coordinates));\r\n\r\n  const headPoint = new Point(coordinates[coordinates.length - 1]);\r\n\r\n  vectorContext.setStyle(headOuterImageStyle);\r\n  vectorContext.drawGeometry(headPoint);\r\n\r\n  vectorContext.setStyle(headInnerImageStyle);\r\n  vectorContext.drawGeometry(headPoint);\r\n\r\n  map.render();\r\n});\r\nmap.render();\r\n"],"sourceRoot":""}