{"version":3,"sources":["webpack:///./animation.js"],"names":["london","moscow","istanbul","rome","bern","view","center","zoom","target","layers","preload","source","bounce","t","const","s","p","elastic","Math","pow","sin","PI","onClick","id","callback","document","getElementById","addEventListener","flyTo","location","done","duration","getZoom","parts","called","complete","animate","rotation","getRotation","anchor","easing","getCenter","locations","index","next","more","length","setTimeout","alert"],"mappings":"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","file":"animation.js","sourcesContent":["import Map from '../src/ol/Map.js';\r\nimport OSM from '../src/ol/source/OSM.js';\r\nimport TileLayer from '../src/ol/layer/Tile.js';\r\nimport View from '../src/ol/View.js';\r\nimport {easeIn, easeOut} from '../src/ol/easing.js';\r\nimport {fromLonLat} from '../src/ol/proj.js';\r\n\r\nconst london = fromLonLat([-0.12755, 51.507222]);\r\nconst moscow = fromLonLat([37.6178, 55.7517]);\r\nconst istanbul = fromLonLat([28.9744, 41.0128]);\r\nconst rome = fromLonLat([12.5, 41.9]);\r\nconst bern = fromLonLat([7.4458, 46.95]);\r\n\r\nconst view = new View({\r\n  center: istanbul,\r\n  zoom: 6,\r\n});\r\n\r\nconst map = new Map({\r\n  target: 'map',\r\n  layers: [\r\n    new TileLayer({\r\n      preload: 4,\r\n      source: new OSM(),\r\n    }),\r\n  ],\r\n  view: view,\r\n});\r\n\r\n// A bounce easing method (from https://github.com/DmitryBaranovskiy/raphael).\r\nfunction bounce(t) {\r\n  const s = 7.5625;\r\n  const p = 2.75;\r\n  let l;\r\n  if (t < 1 / p) {\r\n    l = s * t * t;\r\n  } else {\r\n    if (t < 2 / p) {\r\n      t -= 1.5 / p;\r\n      l = s * t * t + 0.75;\r\n    } else {\r\n      if (t < 2.5 / p) {\r\n        t -= 2.25 / p;\r\n        l = s * t * t + 0.9375;\r\n      } else {\r\n        t -= 2.625 / p;\r\n        l = s * t * t + 0.984375;\r\n      }\r\n    }\r\n  }\r\n  return l;\r\n}\r\n\r\n// An elastic easing method (from https://github.com/DmitryBaranovskiy/raphael).\r\nfunction elastic(t) {\r\n  return (\r\n    Math.pow(2, -10 * t) * Math.sin(((t - 0.075) * (2 * Math.PI)) / 0.3) + 1\r\n  );\r\n}\r\n\r\nfunction onClick(id, callback) {\r\n  document.getElementById(id).addEventListener('click', callback);\r\n}\r\n\r\nonClick('rotate-left', function () {\r\n  view.animate({\r\n    rotation: view.getRotation() + Math.PI / 2,\r\n  });\r\n});\r\n\r\nonClick('rotate-right', function () {\r\n  view.animate({\r\n    rotation: view.getRotation() - Math.PI / 2,\r\n  });\r\n});\r\n\r\nonClick('rotate-around-rome', function () {\r\n  // Rotation animation takes the shortest arc, so animate in two parts\r\n  const rotation = view.getRotation();\r\n  view.animate(\r\n    {\r\n      rotation: rotation + Math.PI,\r\n      anchor: rome,\r\n      easing: easeIn,\r\n    },\r\n    {\r\n      rotation: rotation + 2 * Math.PI,\r\n      anchor: rome,\r\n      easing: easeOut,\r\n    }\r\n  );\r\n});\r\n\r\nonClick('pan-to-london', function () {\r\n  view.animate({\r\n    center: london,\r\n    duration: 2000,\r\n  });\r\n});\r\n\r\nonClick('elastic-to-moscow', function () {\r\n  view.animate({\r\n    center: moscow,\r\n    duration: 2000,\r\n    easing: elastic,\r\n  });\r\n});\r\n\r\nonClick('bounce-to-istanbul', function () {\r\n  view.animate({\r\n    center: istanbul,\r\n    duration: 2000,\r\n    easing: bounce,\r\n  });\r\n});\r\n\r\nonClick('spin-to-rome', function () {\r\n  // Rotation animation takes the shortest arc, so animate in two parts\r\n  const center = view.getCenter();\r\n  view.animate(\r\n    {\r\n      center: [\r\n        center[0] + (rome[0] - center[0]) / 2,\r\n        center[1] + (rome[1] - center[1]) / 2,\r\n      ],\r\n      rotation: Math.PI,\r\n      easing: easeIn,\r\n    },\r\n    {\r\n      center: rome,\r\n      rotation: 2 * Math.PI,\r\n      easing: easeOut,\r\n    }\r\n  );\r\n});\r\n\r\nfunction flyTo(location, done) {\r\n  const duration = 2000;\r\n  const zoom = view.getZoom();\r\n  let parts = 2;\r\n  let called = false;\r\n  function callback(complete) {\r\n    --parts;\r\n    if (called) {\r\n      return;\r\n    }\r\n    if (parts === 0 || !complete) {\r\n      called = true;\r\n      done(complete);\r\n    }\r\n  }\r\n  view.animate(\r\n    {\r\n      center: location,\r\n      duration: duration,\r\n    },\r\n    callback\r\n  );\r\n  view.animate(\r\n    {\r\n      zoom: zoom - 1,\r\n      duration: duration / 2,\r\n    },\r\n    {\r\n      zoom: zoom,\r\n      duration: duration / 2,\r\n    },\r\n    callback\r\n  );\r\n}\r\n\r\nonClick('fly-to-bern', function () {\r\n  flyTo(bern, function () {});\r\n});\r\n\r\nfunction tour() {\r\n  const locations = [london, bern, rome, moscow, istanbul];\r\n  let index = -1;\r\n  function next(more) {\r\n    if (more) {\r\n      ++index;\r\n      if (index < locations.length) {\r\n        const delay = index === 0 ? 0 : 750;\r\n        setTimeout(function () {\r\n          flyTo(locations[index], next);\r\n        }, delay);\r\n      } else {\r\n        alert('Tour complete');\r\n      }\r\n    } else {\r\n      alert('Tour cancelled');\r\n    }\r\n  }\r\n  next(true);\r\n}\r\n\r\nonClick('tour', tour);\r\n"],"sourceRoot":""}