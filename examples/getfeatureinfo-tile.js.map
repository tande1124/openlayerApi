{"version":3,"sources":["webpack:///./getfeatureinfo-tile.js"],"names":["wmsSource","url","params","serverType","crossOrigin","wmsLayer","source","view","center","zoom","map","layers","target","on","evt","document","getElementById","innerHTML","const","viewResolution","getResolution","getFeatureInfoUrl","coordinate","fetch","then","response","text","html","dragging","pixel","getEventPixel","originalEvent","hit","forEachLayerAtPixel","getTargetElement","style","cursor"],"mappings":"2FAAA,wCAKMA,EAAY,IAAI,IAAQ,CAC5BC,IAAK,qCACLC,OAAQ,CAAC,OAAU,QAAS,OAAS,GACrCC,WAAY,YACZC,YAAa,cAGTC,EAAW,IAAI,IAAU,CAC7BC,OAAQN,IAGJO,EAAO,IAAI,IAAK,CACpBC,OAAQ,CAAC,EAAG,GACZC,KAAM,IAGFC,EAAM,IAAI,IAAI,CAClBC,OAAQ,CAACN,GACTO,OAAQ,MACRL,KAAMA,IAGRG,EAAIG,GAAG,eAAe,SAAUC,GAC9BC,SAASC,eAAe,QAAQC,UAAY,GAC5CC,IAAMC,EAAwCZ,EAAKa,gBAC7CnB,EAAMD,EAAUqB,kBACpBP,EAAIQ,WACJH,EACA,YACA,CAAC,YAAe,cAEdlB,GACFsB,MAAMtB,GACHuB,MAAK,SAACC,GAAQ,OAAKA,EAASC,UAC5BF,MAAK,SAACG,GACLZ,SAASC,eAAe,QAAQC,UAAYU,QAKpDjB,EAAIG,GAAG,eAAe,SAAUC,GAC9B,IAAIA,EAAIc,SAAR,CAGAV,IAAMW,EAAQnB,EAAIoB,cAAchB,EAAIiB,eAC9BC,EAAMtB,EAAIuB,oBAAoBJ,GAAO,WACzC,OAAO,KAETnB,EAAIwB,mBAAmBC,MAAMC,OAASJ,EAAM,UAAY,S","file":"getfeatureinfo-tile.js","sourcesContent":["import Map from '../src/ol/Map.js';\r\nimport TileLayer from '../src/ol/layer/Tile.js';\r\nimport TileWMS from '../src/ol/source/TileWMS.js';\r\nimport View from '../src/ol/View.js';\r\n\r\nconst wmsSource = new TileWMS({\r\n  url: 'https://ahocevar.com/geoserver/wms',\r\n  params: {'LAYERS': 'ne:ne', 'TILED': true},\r\n  serverType: 'geoserver',\r\n  crossOrigin: 'anonymous',\r\n});\r\n\r\nconst wmsLayer = new TileLayer({\r\n  source: wmsSource,\r\n});\r\n\r\nconst view = new View({\r\n  center: [0, 0],\r\n  zoom: 1,\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [wmsLayer],\r\n  target: 'map',\r\n  view: view,\r\n});\r\n\r\nmap.on('singleclick', function (evt) {\r\n  document.getElementById('info').innerHTML = '';\r\n  const viewResolution = /** @type {number} */ (view.getResolution());\r\n  const url = wmsSource.getFeatureInfoUrl(\r\n    evt.coordinate,\r\n    viewResolution,\r\n    'EPSG:3857',\r\n    {'INFO_FORMAT': 'text/html'}\r\n  );\r\n  if (url) {\r\n    fetch(url)\r\n      .then((response) => response.text())\r\n      .then((html) => {\r\n        document.getElementById('info').innerHTML = html;\r\n      });\r\n  }\r\n});\r\n\r\nmap.on('pointermove', function (evt) {\r\n  if (evt.dragging) {\r\n    return;\r\n  }\r\n  const pixel = map.getEventPixel(evt.originalEvent);\r\n  const hit = map.forEachLayerAtPixel(pixel, function () {\r\n    return true;\r\n  });\r\n  map.getTargetElement().style.cursor = hit ? 'pointer' : '';\r\n});\r\n"],"sourceRoot":""}