{"version":3,"sources":["webpack:///./geographic.js"],"names":["const","place","point","map","target","view","center","zoom","layers","source","features","style","image","radius","fill","color","element","document","getElementById","popup","positioning","stopEvent","offset","formatCoordinate","coordinate","toFixed","addOverlay","info","on","getView","getCenter","innerHTML","event","feature","getFeaturesAtPixel","pixel","getGeometry","getCoordinates","setPosition","$","popover","container","parentElement","html","sanitize","content","placement","hasFeatureAtPixel","getViewport","cursor"],"mappings":"2FAAA,8GAOA,cAEAA,IAAMC,EAAQ,EAAE,IAAK,IAEfC,EAAQ,IAAI,IAAMD,GAElBE,EAAM,IAAI,IAAI,CAClBC,OAAQ,MACRC,KAAM,IAAI,IAAK,CACbC,OAAQL,EACRM,KAAM,IAERC,OAAQ,CACN,IAAI,IAAU,CACZC,OAAQ,IAAI,MAEd,IAAI,IAAY,CACdA,OAAQ,IAAI,IAAa,CACvBC,SAAU,CAAC,IAAI,IAAQR,MAEzBS,MAAO,IAAI,IAAM,CACfC,MAAO,IAAI,IAAO,CAChBC,OAAQ,EACRC,KAAM,IAAI,IAAK,CAACC,MAAO,iBAO3BC,EAAUC,SAASC,eAAe,SAElCC,EAAQ,IAAI,IAAQ,CACxBH,QAASA,EACTI,YAAa,gBACbC,WAAW,EACXC,OAAQ,CAAC,GAAI,MAIf,SAASC,EAAiBC,GACxB,MAAO,6DAGqBA,EAAW,GAAGC,QAAQ,GAAE,2CACxBD,EAAW,GAAGC,QAAQ,GAAE,2CAPtDtB,EAAIuB,WAAWP,GAYfnB,IAAM2B,EAAOV,SAASC,eAAe,QACrCf,EAAIyB,GAAG,WAAW,WAChB5B,IACMM,EADOH,EAAI0B,UACGC,YACpBH,EAAKI,UAAYR,EAAiBjB,MAGpCH,EAAIyB,GAAG,SAAS,SAAUI,GACxBhC,IAAMiC,EAAU9B,EAAI+B,mBAAmBF,EAAMG,OAAO,GACpD,GAAIF,EAAS,CACXjC,IAAMwB,EAAaS,EAAQG,cAAcC,iBACzClB,EAAMmB,YAAYd,GAClBe,EAAEvB,GAASwB,QAAQ,CACjBC,UAAWzB,EAAQ0B,cACnBC,MAAM,EACNC,UAAU,EACVC,QAAStB,EAAiBC,GAC1BsB,UAAW,QAEbP,EAAEvB,GAASwB,QAAQ,aAEnBD,EAAEvB,GAASwB,QAAQ,cAIvBrC,EAAIyB,GAAG,eAAe,SAAUI,GAC1B7B,EAAI4C,kBAAkBf,EAAMG,OAC9BhC,EAAI6C,cAAcrC,MAAMsC,OAAS,UAEjC9C,EAAI6C,cAAcrC,MAAMsC,OAAS,e","file":"geographic.js","sourcesContent":["import {Circle, Fill, Style} from '../src/ol/style.js';\r\nimport {Feature, Map, Overlay, View} from '../src/ol/index.js';\r\nimport {OSM, Vector as VectorSource} from '../src/ol/source.js';\r\nimport {Point} from '../src/ol/geom.js';\r\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\r\nimport {useGeographic} from '../src/ol/proj.js';\r\n\r\nuseGeographic();\r\n\r\nconst place = [-110, 45];\r\n\r\nconst point = new Point(place);\r\n\r\nconst map = new Map({\r\n  target: 'map',\r\n  view: new View({\r\n    center: place,\r\n    zoom: 8,\r\n  }),\r\n  layers: [\r\n    new TileLayer({\r\n      source: new OSM(),\r\n    }),\r\n    new VectorLayer({\r\n      source: new VectorSource({\r\n        features: [new Feature(point)],\r\n      }),\r\n      style: new Style({\r\n        image: new Circle({\r\n          radius: 9,\r\n          fill: new Fill({color: 'red'}),\r\n        }),\r\n      }),\r\n    }),\r\n  ],\r\n});\r\n\r\nconst element = document.getElementById('popup');\r\n\r\nconst popup = new Overlay({\r\n  element: element,\r\n  positioning: 'bottom-center',\r\n  stopEvent: false,\r\n  offset: [0, -10],\r\n});\r\nmap.addOverlay(popup);\r\n\r\nfunction formatCoordinate(coordinate) {\r\n  return `\r\n    <table>\r\n      <tbody>\r\n        <tr><th>lon</th><td>${coordinate[0].toFixed(2)}</td></tr>\r\n        <tr><th>lat</th><td>${coordinate[1].toFixed(2)}</td></tr>\r\n      </tbody>\r\n    </table>`;\r\n}\r\n\r\nconst info = document.getElementById('info');\r\nmap.on('moveend', function () {\r\n  const view = map.getView();\r\n  const center = view.getCenter();\r\n  info.innerHTML = formatCoordinate(center);\r\n});\r\n\r\nmap.on('click', function (event) {\r\n  const feature = map.getFeaturesAtPixel(event.pixel)[0];\r\n  if (feature) {\r\n    const coordinate = feature.getGeometry().getCoordinates();\r\n    popup.setPosition(coordinate);\r\n    $(element).popover({\r\n      container: element.parentElement,\r\n      html: true,\r\n      sanitize: false,\r\n      content: formatCoordinate(coordinate),\r\n      placement: 'top',\r\n    });\r\n    $(element).popover('show');\r\n  } else {\r\n    $(element).popover('dispose');\r\n  }\r\n});\r\n\r\nmap.on('pointermove', function (event) {\r\n  if (map.hasFeatureAtPixel(event.pixel)) {\r\n    map.getViewport().style.cursor = 'pointer';\r\n  } else {\r\n    map.getViewport().style.cursor = 'inherit';\r\n  }\r\n});\r\n"],"sourceRoot":""}