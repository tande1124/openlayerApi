{"version":3,"sources":["webpack:///./animated-gif.js"],"names":["iconFeature","geometry","vectorSource","features","vectorLayer","source","rasterLayer","layer","map","layers","target","document","getElementById","view","center","zoom","gifler","frames","createElement","ctx","frame","getStyle","setStyle","image","img","canvas","imgSize","width","height","opacity","clearRect","drawImage","buffer","x","y","render","on","e","const","pixel","getEventPixel","originalEvent","hit","hasFeatureAtPixel","getTarget","style","cursor"],"mappings":"0FAAA,wFAQMA,EAAc,IAAI,IAAQ,CAC9BC,SAAU,IAAI,IAAM,CAAC,EAAG,MAGpBC,EAAe,IAAI,IAAa,CACpCC,SAAU,CAACH,KAGPI,EAAc,IAAI,IAAY,CAClCC,OAAQH,IAGJI,EAAc,IAAI,IAAU,CAChCD,OAAQ,IAAI,IAAO,CACjBE,MAAO,YAILC,EAAM,IAAI,IAAI,CAClBC,OAAQ,CAACH,EAAaF,GACtBM,OAAQC,SAASC,eAAe,OAChCC,KAAM,IAAI,IAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAKEC,OADG,kBAEXC,OACFN,SAASO,cAAc,WACvB,SAAUC,EAAKC,GACRpB,EAAYqB,YACfrB,EAAYsB,SACV,IAAI,IAAM,CACRC,MAAO,IAAI,IAAK,CACdC,IAAKL,EAAIM,OACTC,QAAS,CAACN,EAAMO,MAAOP,EAAMQ,QAC7BC,QAAS,QAKjBV,EAAIW,UAAU,EAAG,EAAGV,EAAMO,MAAOP,EAAMQ,QACvCT,EAAIY,UAAUX,EAAMY,OAAQZ,EAAMa,EAAGb,EAAMc,GAC3C1B,EAAI2B,YAEN,GAIF3B,EAAI4B,GAAG,eAAe,SAAUC,GAC9BC,IAAMC,EAAQ/B,EAAIgC,cAAcH,EAAEI,eAC5BC,EAAMlC,EAAImC,kBAAkBJ,GAClC/B,EAAIoC,YAAYC,MAAMC,OAASJ,EAAM,UAAY,Q","file":"animated-gif.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\r\nimport Map from '../src/ol/Map.js';\r\nimport Point from '../src/ol/geom/Point.js';\r\nimport View from '../src/ol/View.js';\r\nimport {Icon, Style} from '../src/ol/style.js';\r\nimport {Stamen, Vector as VectorSource} from '../src/ol/source.js';\r\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\r\n\r\nconst iconFeature = new Feature({\r\n  geometry: new Point([0, 0]),\r\n});\r\n\r\nconst vectorSource = new VectorSource({\r\n  features: [iconFeature],\r\n});\r\n\r\nconst vectorLayer = new VectorLayer({\r\n  source: vectorSource,\r\n});\r\n\r\nconst rasterLayer = new TileLayer({\r\n  source: new Stamen({\r\n    layer: 'toner',\r\n  }),\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [rasterLayer, vectorLayer],\r\n  target: document.getElementById('map'),\r\n  view: new View({\r\n    center: [0, 0],\r\n    zoom: 2,\r\n  }),\r\n});\r\n\r\nconst gifUrl = 'data/globe.gif';\r\nconst gif = gifler(gifUrl);\r\ngif.frames(\r\n  document.createElement('canvas'),\r\n  function (ctx, frame) {\r\n    if (!iconFeature.getStyle()) {\r\n      iconFeature.setStyle(\r\n        new Style({\r\n          image: new Icon({\r\n            img: ctx.canvas,\r\n            imgSize: [frame.width, frame.height],\r\n            opacity: 0.8,\r\n          }),\r\n        })\r\n      );\r\n    }\r\n    ctx.clearRect(0, 0, frame.width, frame.height);\r\n    ctx.drawImage(frame.buffer, frame.x, frame.y);\r\n    map.render();\r\n  },\r\n  true\r\n);\r\n\r\n// change mouse cursor when over icon\r\nmap.on('pointermove', function (e) {\r\n  const pixel = map.getEventPixel(e.originalEvent);\r\n  const hit = map.hasFeatureAtPixel(pixel);\r\n  map.getTarget().style.cursor = hit ? 'pointer' : '';\r\n});\r\n"],"sourceRoot":""}