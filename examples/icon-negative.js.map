{"version":3,"sources":["webpack:///./icon-negative.js"],"names":["createStyle","src","img","image","anchor","crossOrigin","imgSize","width","height","undefined","const","iconFeature","set","map","layers","source","layer","style","feature","get","features","target","document","getElementById","view","center","zoom","selectStyle","select","getImage","canvas","createElement","context","getContext","drawImage","imageData","getImageData","data","i","ii","length","putImageData","addInteraction","on","evt","getTargetElement","cursor","hasFeatureAtPixel","pixel"],"mappings":"2FAAA,gGAUA,SAASA,EAAYC,EAAKC,GACxB,OAAO,IAAI,IAAM,CACfC,MAAO,IAAI,IAAK,CACdC,OAAQ,CAAC,GAAK,KACdC,YAAa,YACbJ,IAAKA,EACLC,IAAKA,EACLI,QAASJ,EAAM,CAACA,EAAIK,MAAOL,EAAIM,aAAUC,MAK/CC,IAAMC,EAAc,IAAI,IAAQ,IAAI,IAAM,CAAC,EAAG,KAC9CA,EAAYC,IAAI,QAASZ,EAAY,qBAAiBS,IAEtDC,IAAMG,EAAM,IAAI,IAAI,CAClBC,OAAQ,CACN,IAAI,IAAU,CACZC,OAAQ,IAAI,IAAO,CAACC,MAAO,iBAE7B,IAAI,IAAY,CACdC,MAAO,SAAUC,GACf,OAAOA,EAAQC,IAAI,UAErBJ,OAAQ,IAAI,IAAa,CAACK,SAAU,CAACT,QAGzCU,OAAQC,SAASC,eAAe,OAChCC,KAAM,IAAI,IAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIJC,EAAc,GACdC,EAAS,IAAI,IAAO,CACxBX,MAAO,SAAUC,GACfR,IAAMP,EAAQe,EAAQC,IAAI,SAASU,WAAWA,WAC9C,IAAKF,EAAYxB,EAAMF,KAAM,CAC3BS,IAAMoB,EAASR,SAASS,cAAc,UAChCC,EAAUF,EAAOG,WAAW,MAClCH,EAAOvB,MAAQJ,EAAMI,MACrBuB,EAAOtB,OAASL,EAAMK,OACtBwB,EAAQE,UAAU/B,EAAO,EAAG,EAAGA,EAAMI,MAAOJ,EAAMK,QAGlD,IAFAE,IAAMyB,EAAYH,EAAQI,aAAa,EAAG,EAAGN,EAAOvB,MAAOuB,EAAOtB,QAC5D6B,EAAOF,EAAUE,KACdC,EAAI,EAAGC,EAAKF,EAAKG,OAAQF,EAAIC,EAAID,GAASA,EAAI,GAAK,EAAI,EAAI,EAClED,EAAKC,GAAK,IAAMD,EAAKC,GAEvBN,EAAQS,aAAaN,EAAW,EAAG,GACnCR,EAAYxB,EAAMF,KAAOD,OAAYS,EAAWqB,GAElD,OAAOH,EAAYxB,EAAMF,QAG7BY,EAAI6B,eAAed,GAEnBf,EAAI8B,GAAG,eAAe,SAAUC,GAC9B/B,EAAIgC,mBAAmB5B,MAAM6B,OAASjC,EAAIkC,kBAAkBH,EAAII,OAC5D,UACA,Q","file":"icon-negative.js","sourcesContent":["import Feature from '../src/ol/Feature.js';\r\nimport Map from '../src/ol/Map.js';\r\nimport Point from '../src/ol/geom/Point.js';\r\nimport Select from '../src/ol/interaction/Select.js';\r\nimport Stamen from '../src/ol/source/Stamen.js';\r\nimport VectorSource from '../src/ol/source/Vector.js';\r\nimport View from '../src/ol/View.js';\r\nimport {Icon, Style} from '../src/ol/style.js';\r\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\r\n\r\nfunction createStyle(src, img) {\r\n  return new Style({\r\n    image: new Icon({\r\n      anchor: [0.5, 0.96],\r\n      crossOrigin: 'anonymous',\r\n      src: src,\r\n      img: img,\r\n      imgSize: img ? [img.width, img.height] : undefined,\r\n    }),\r\n  });\r\n}\r\n\r\nconst iconFeature = new Feature(new Point([0, 0]));\r\niconFeature.set('style', createStyle('data/icon.png', undefined));\r\n\r\nconst map = new Map({\r\n  layers: [\r\n    new TileLayer({\r\n      source: new Stamen({layer: 'watercolor'}),\r\n    }),\r\n    new VectorLayer({\r\n      style: function (feature) {\r\n        return feature.get('style');\r\n      },\r\n      source: new VectorSource({features: [iconFeature]}),\r\n    }),\r\n  ],\r\n  target: document.getElementById('map'),\r\n  view: new View({\r\n    center: [0, 0],\r\n    zoom: 3,\r\n  }),\r\n});\r\n\r\nconst selectStyle = {};\r\nconst select = new Select({\r\n  style: function (feature) {\r\n    const image = feature.get('style').getImage().getImage();\r\n    if (!selectStyle[image.src]) {\r\n      const canvas = document.createElement('canvas');\r\n      const context = canvas.getContext('2d');\r\n      canvas.width = image.width;\r\n      canvas.height = image.height;\r\n      context.drawImage(image, 0, 0, image.width, image.height);\r\n      const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n      const data = imageData.data;\r\n      for (let i = 0, ii = data.length; i < ii; i = i + (i % 4 == 2 ? 2 : 1)) {\r\n        data[i] = 255 - data[i];\r\n      }\r\n      context.putImageData(imageData, 0, 0);\r\n      selectStyle[image.src] = createStyle(undefined, canvas);\r\n    }\r\n    return selectStyle[image.src];\r\n  },\r\n});\r\nmap.addInteraction(select);\r\n\r\nmap.on('pointermove', function (evt) {\r\n  map.getTargetElement().style.cursor = map.hasFeatureAtPixel(evt.pixel)\r\n    ? 'pointer'\r\n    : '';\r\n});\r\n"],"sourceRoot":""}