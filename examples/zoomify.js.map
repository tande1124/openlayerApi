{"version":3,"sources":["webpack:///./zoomify.js"],"names":["zoomifyUrl","source","url","size","crossOrigin","zDirection","extent","getTileGrid","getExtent","retinaSource","tilePixelRatio","tileSize","layer","layers","target","view","resolutions","getSource","getResolutions","constrainOnlyCenter","getView","fit","document","getElementById","addEventListener","event","const","value","currentTarget","setSource"],"mappings":"4FAAA,yCAQMA,EAAa,uCAEbC,EAAS,IAAI,IAAQ,CACzBC,IAAKF,EACLG,KAAM,CAPS,IACC,KAOhBC,YAAa,YACbC,YAAa,IAETC,EAASL,EAAOM,cAAcC,YAG9BC,EAAe,IAAI,IAAQ,CAC/BP,IAAKF,EACLG,KAAM,CAhBS,IACC,KAgBhBC,YAAa,YACbC,YAAa,EACbK,eANuB,EAOvBC,SAAU,MAGNC,EAAQ,IAAI,IAAU,CAC1BX,OAAQA,IAGE,IAAI,IAAI,CAClBY,OAAQ,CAACD,GACTE,OAAQ,MACRC,KAAM,IAAI,IAAK,CAEbC,YAAaJ,EAAMK,YAAYV,cAAcW,iBAE7CZ,OAAQA,EACRa,qBAAqB,MAGrBC,UAAUC,IAAIf,GAEFgB,SAASC,eAAe,mBAChCC,iBAAiB,UAAU,SAAUC,GAC3CC,IAAMC,EAAQF,EAAMG,cAAcD,MACpB,YAAVA,EACFf,EAAMiB,UAAU5B,GACG,kBAAV0B,GACTf,EAAMiB,UAAUpB,Q","file":"zoomify.js","sourcesContent":["import Map from '../src/ol/Map.js';\r\nimport TileLayer from '../src/ol/layer/Tile.js';\r\nimport View from '../src/ol/View.js';\r\nimport Zoomify from '../src/ol/source/Zoomify.js';\r\n\r\nconst imgWidth = 4000;\r\nconst imgHeight = 3000;\r\n\r\nconst zoomifyUrl = 'https://ol-zoomify.surge.sh/zoomify/';\r\n\r\nconst source = new Zoomify({\r\n  url: zoomifyUrl,\r\n  size: [imgWidth, imgHeight],\r\n  crossOrigin: 'anonymous',\r\n  zDirection: -1, // Ensure we get a tile with the screen resolution or higher\r\n});\r\nconst extent = source.getTileGrid().getExtent();\r\n\r\nconst retinaPixelRatio = 2;\r\nconst retinaSource = new Zoomify({\r\n  url: zoomifyUrl,\r\n  size: [imgWidth, imgHeight],\r\n  crossOrigin: 'anonymous',\r\n  zDirection: -1, // Ensure we get a tile with the screen resolution or higher\r\n  tilePixelRatio: retinaPixelRatio, // Display retina tiles\r\n  tileSize: 256 / retinaPixelRatio, // from a higher zoom level\r\n});\r\n\r\nconst layer = new TileLayer({\r\n  source: source,\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [layer],\r\n  target: 'map',\r\n  view: new View({\r\n    // adjust zoom levels to those provided by the source\r\n    resolutions: layer.getSource().getTileGrid().getResolutions(),\r\n    // constrain the center: center cannot be set outside this extent\r\n    extent: extent,\r\n    constrainOnlyCenter: true,\r\n  }),\r\n});\r\nmap.getView().fit(extent);\r\n\r\nconst control = document.getElementById('zoomifyProtocol');\r\ncontrol.addEventListener('change', function (event) {\r\n  const value = event.currentTarget.value;\r\n  if (value === 'zoomify') {\r\n    layer.setSource(source);\r\n  } else if (value === 'zoomifyretina') {\r\n    layer.setSource(retinaSource);\r\n  }\r\n});\r\n"],"sourceRoot":""}