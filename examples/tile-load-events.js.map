{"version":3,"sources":["webpack:///./tile-load-events.js"],"names":["Progress","el","this","loading","loaded","prototype","addLoading","show","update","addLoaded","const","this_","setTimeout","width","toFixed","style","hide","visibility","progress","document","getElementById","source","attributions","url","tileSize","on","layers","target","view","center","zoom"],"mappings":"4FAAA,wCAUA,SAASA,EAASC,GAChBC,KAAKD,GAAKA,EACVC,KAAKC,QAAU,EACfD,KAAKE,OAAS,EAMhBJ,EAASK,UAAUC,WAAa,WACT,IAAjBJ,KAAKC,SACPD,KAAKK,SAELL,KAAKC,QACPD,KAAKM,UAMPR,EAASK,UAAUI,UAAY,WAC7BC,IAAMC,EAAQT,KACdU,YAAW,aACPD,EAAMP,OACRO,EAAMH,WACL,MAMLR,EAASK,UAAUG,OAAS,WAC1BE,IAAMG,GAAUX,KAAKE,OAASF,KAAKC,QAAW,KAAKW,QAAQ,GAAK,IAEhE,GADAZ,KAAKD,GAAGc,MAAMF,MAAQA,EAClBX,KAAKC,UAAYD,KAAKE,OAAQ,CAChCF,KAAKC,QAAU,EACfD,KAAKE,OAAS,EACdM,IAAMC,EAAQT,KACdU,YAAW,WACTD,EAAMK,SACL,OAOPhB,EAASK,UAAUE,KAAO,WACxBL,KAAKD,GAAGc,MAAME,WAAa,WAM7BjB,EAASK,UAAUW,KAAO,WACpBd,KAAKC,UAAYD,KAAKE,SACxBF,KAAKD,GAAGc,MAAME,WAAa,SAC3Bf,KAAKD,GAAGc,MAAMF,MAAQ,IAI1BH,IAAMQ,EAAW,IAAIlB,EAASmB,SAASC,eAAe,aAOhDC,EAAS,IAAI,IAAI,CACrBC,aAJA,4LAKAC,IAAK,8FACLC,SAAU,MAGZH,EAAOI,GAAG,iBAAiB,WACzBP,EAASZ,gBAGXe,EAAOI,GAAG,eAAe,WACvBP,EAAST,eAEXY,EAAOI,GAAG,iBAAiB,WACzBP,EAAST,eAGC,IAAI,IAAI,CAClBiB,OAAQ,CAAC,IAAI,IAAU,CAACL,OAAQA,KAChCM,OAAQ,MACRC,KAAM,IAAI,IAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,Q","file":"tile-load-events.js","sourcesContent":["import Map from '../src/ol/Map.js';\r\nimport TileLayer from '../src/ol/layer/Tile.js';\r\nimport View from '../src/ol/View.js';\r\nimport XYZ from '../src/ol/source/XYZ.js';\r\n\r\n/**\r\n * Renders a progress bar.\r\n * @param {HTMLElement} el The target element.\r\n * @constructor\r\n */\r\nfunction Progress(el) {\r\n  this.el = el;\r\n  this.loading = 0;\r\n  this.loaded = 0;\r\n}\r\n\r\n/**\r\n * Increment the count of loading tiles.\r\n */\r\nProgress.prototype.addLoading = function () {\r\n  if (this.loading === 0) {\r\n    this.show();\r\n  }\r\n  ++this.loading;\r\n  this.update();\r\n};\r\n\r\n/**\r\n * Increment the count of loaded tiles.\r\n */\r\nProgress.prototype.addLoaded = function () {\r\n  const this_ = this;\r\n  setTimeout(function () {\r\n    ++this_.loaded;\r\n    this_.update();\r\n  }, 100);\r\n};\r\n\r\n/**\r\n * Update the progress bar.\r\n */\r\nProgress.prototype.update = function () {\r\n  const width = ((this.loaded / this.loading) * 100).toFixed(1) + '%';\r\n  this.el.style.width = width;\r\n  if (this.loading === this.loaded) {\r\n    this.loading = 0;\r\n    this.loaded = 0;\r\n    const this_ = this;\r\n    setTimeout(function () {\r\n      this_.hide();\r\n    }, 500);\r\n  }\r\n};\r\n\r\n/**\r\n * Show the progress bar.\r\n */\r\nProgress.prototype.show = function () {\r\n  this.el.style.visibility = 'visible';\r\n};\r\n\r\n/**\r\n * Hide the progress bar.\r\n */\r\nProgress.prototype.hide = function () {\r\n  if (this.loading === this.loaded) {\r\n    this.el.style.visibility = 'hidden';\r\n    this.el.style.width = 0;\r\n  }\r\n};\r\n\r\nconst progress = new Progress(document.getElementById('progress'));\r\n\r\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\r\nconst attributions =\r\n  '<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> ' +\r\n  '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>';\r\n\r\nconst source = new XYZ({\r\n  attributions: attributions,\r\n  url: 'https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=' + key,\r\n  tileSize: 512,\r\n});\r\n\r\nsource.on('tileloadstart', function () {\r\n  progress.addLoading();\r\n});\r\n\r\nsource.on('tileloadend', function () {\r\n  progress.addLoaded();\r\n});\r\nsource.on('tileloaderror', function () {\r\n  progress.addLoaded();\r\n});\r\n\r\nconst map = new Map({\r\n  layers: [new TileLayer({source: source})],\r\n  target: 'map',\r\n  view: new View({\r\n    center: [0, 0],\r\n    zoom: 2,\r\n  }),\r\n});\r\n"],"sourceRoot":""}